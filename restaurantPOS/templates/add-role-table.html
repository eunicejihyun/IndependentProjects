{% block content %}
{% include "header.html" %}

<div class="container">
    <div class="row main-row">

        <!--MENU-->
        <div class="col-md-7 no-padding left-side">
            {% include "menu.html" %}
        </div>

        <!--RIGHT SIDE-->
        <div class="col-md-5 right-side">
            {% include "navbar.html" %}

            <!--CONTENT-->
            <h1 class="right-heading">
                SETTINGS
                <span class="settings-subheading">
                    {% if url_for(request.endpoint)== '/add-role': %}
                                    Add Role
                                    {% else: %}
                                    Add Table
                                    {% endif %}
                </span>
            </h1>

            <div class="role-table-form">

                {% if url_for(request.endpoint)=='/add-role': %}
                <form action="{{ url_for('add_role') }}" method="POST" novalidate>
                    {% else: %}
                    <form action="{{ url_for('add_table') }}" method="POST" novalidate>
                        {% endif %}
                        {{ form.csrf_token }}

                        <table>
                            <tr>
                                <td class="form-label"> ADD</td>
                                <td class="form-field">
                                    {% if url_for(request.endpoint)== '/add-role': %}
                                    {{ form.field(size=35, placeholder='i.e. Owner, Manager, Server, Kitchen Staff') }}
                                    {% else: %}
                                    {{ form.field(size=35, placeholder='i.e. Take Out, Table 1, Round Table, Room 1
                                    Table') }}
                                    {% endif %}

                                    {% for err in form.field.errors %}
                                    <p class="form-error-msg">{{ err }}</p>
                                    {% endfor %}

                                </td>
                            </tr>
                            <tr>
                                <td></td>
                                <td>
                                    <!--SUBMIT BUTTON-->
                                    {{ form.submit }}
                                </td>
                            </tr>

                            <tr>
                                <td colspan="2">
                                    <!--FLASH MESSAGES-->
                                    <div class="flash-msg">
                                        {% with messages = get_flashed_messages() %}
                                        {% if messages %}
                                        <span class="flashes"> {% for message in messages %}<p>{{ message }}</p>{% endfor %} </span>
                                        {% endif %}
                                        {% endwith %}
                                    </div>
                                    <!-- END FLASH MESSAGES-->
                                </td>
                            </tr>
                        </table>

                    </form>
            </div>


            {% if url_for(request.endpoint)== '/add-role': %}

            <div class="current-data">
                <h3>
                    Current Roles
                </h3>
                <ol class="current-data-list">
                    {% for x in roles %}
                    <li>
                        {{x.name}}
                        <a class="menu-buttons remove-button" href="{{url_for('delete_role', role_id=x.id)}}">
                            <i class="fas fa-times-circle"></i>
                        </a>
                    </li>
                    {% endfor %}
                </ol>
            </div>

            <a class="next-page" href="{{ url_for('add_user') }}">
                <button class="btn next-btn" type="button">
                    Add Users
                    <i class="fas fa-angle-double-right"></i>
                </button>
            </a>

            {% else: %}

            <div class="current-data">
                <h3>
                    Current Tables
                </h3>
                <ol class="current-data-list">
                    {% for x in tables: %}
                    {% if x.status != "inactive": %}
                    <li>
                        {{x.name}}
                        {% if x.name != "Take Out": %}
                        <a class="menu-buttons remove-button" href="{{url_for('remove_table', table_id=x.id)}}">
                            <i class="fas fa-times-circle"></i>
                        </a>
                        {% endif %}
                    </li>
                    {% endif %}
                    {% endfor %}
                </ol>
            </div>

            <a class="next-page" href="{{ url_for('add_category') }}">
                <button class="btn next-btn" type="button">
                    Setup Menu Categories
                    <i class="fas fa-angle-double-right"></i>
                </button>
            </a>

            {% endif %}


            <!--END CONTENT-->


        </div>
    </div>
</div>
{% endblock %}